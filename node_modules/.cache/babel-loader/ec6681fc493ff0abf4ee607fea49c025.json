{"remainingRequest":"C:\\Users\\riyan\\frontend-shop\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\riyan\\frontend-shop\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\riyan\\frontend-shop\\src\\store\\module\\auth.js","dependencies":[{"path":"C:\\Users\\riyan\\frontend-shop\\src\\store\\module\\auth.js","mtime":1631114266800},{"path":"C:\\Users\\riyan\\frontend-shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\riyan\\frontend-shop\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\riyan\\frontend-shop\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLyBpbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAnY29yZS1qcy9mbi9wcm9taXNlJwppbXBvcnQgQXBpIGZyb20gJy4uLy4uL2FwaS9BcGknOwp2YXIgYXV0aCA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgfHwgJycsCiAgICB1c2VyOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpIHx8IHt9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIEFVVEhfU1VDQ0VTUzogZnVuY3Rpb24gQVVUSF9TVUNDRVNTKHN0YXRlLCB0b2tlbiwgdXNlcikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgICBzdGF0ZS51c2VyID0gdXNlcjsKICAgIH0sCiAgICBHRVRfVVNFUjogZnVuY3Rpb24gR0VUX1VTRVIoc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9LAogICAgQVVUSF9MT0dPVVQ6IGZ1bmN0aW9uIEFVVEhfTE9HT1VUKHN0YXRlKSB7CiAgICAgIHN0YXRlLnRva2VuID0gJyc7CiAgICAgIHN0YXRlLnVzZXIgPSB7fTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHJlZ2lzdGVyOiB7CiAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcihfcmVmLCB1c2VyKSB7CiAgICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICBBcGkucG9zdCgnL3JlZ2lzdGVyJywgewogICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsCiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZCwKICAgICAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiB1c2VyLnBhc3N3b3JkX2NvbmZpcm1hdGlvbgogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzcG9uc2UuZGF0YS50b2tlbjsKICAgICAgICAgICAgdmFyIHVzZXIgPSByZXNwb25zZS5kYXRhLnVzZXI7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICAgICAgICAgIEFwaS5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciIgKyB0b2tlbjsKICAgICAgICAgICAgY29tbWl0KCdBVVRIX1NVQ0NFU1MnLCB0b2tlbiwgdXNlcik7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgICByZWplY3QoZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcihfcmVmMikgewogICAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgQXBpLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyIiArIHRva2VuOwogICAgICAgIEFwaS5nZXQoJy91c2VyJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbW1pdCgnR0VUX1VTRVInLCByZXNwb25zZS5kYXRhLnVzZXIpOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICBjb21taXQoIkFVVEhfTE9HT1VUIik7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICAgICAgICBkZWxldGUgQXBpLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ107CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0sCiAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiBpc0xvZ2dlZEluKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IGF1dGg7"},{"version":3,"sources":["C:/Users/riyan/frontend-shop/src/store/module/auth.js"],"names":["Api","auth","namespaced","state","token","localStorage","getItem","user","JSON","parse","mutations","AUTH_SUCCESS","GET_USER","AUTH_LOGOUT","actions","register","commit","Promise","resolve","reject","post","name","email","password","password_confirmation","then","response","data","setItem","stringify","defaults","headers","common","catch","error","removeItem","getUser","get","logout","getters","currentUser","isLoggedIn"],"mappings":"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","sourcesContent":["// import { resolve } from 'core-js/fn/promise'\r\nimport Api from '../../api/Api'\r\nconst auth = {\r\n    namespaced: true, \r\n    state: {\r\n        token: localStorage.getItem('token') || '',\r\n\r\n        user: JSON.parse(localStorage.getItem('user')) || {},\r\n    },\r\n    mutations: {\r\n        AUTH_SUCCESS(state, token, user) {\r\n            state.token = token\r\n            state.user = user\r\n        },\r\n\r\n        GET_USER(state, user) {\r\n            state.user = user\r\n        },\r\n\r\n        AUTH_LOGOUT(state) {\r\n            state.token = ''\r\n            state.user  = {}\r\n        }\r\n    },\r\n\r\n    actions: {\r\n        register: {\r\n            register({commit}, user){\r\n                return new Promise((resolve,reject) =>{\r\n                    Api.post('/register', {\r\n                        name: user.name,\r\n                        email: user.email,\r\n                        password: user.password,\r\n                        password_confirmation: user.password_confirmation\r\n                    })\r\n\r\n                    .then(response => {\r\n                        const token = response.data.token\r\n                        const user = response.data.user\r\n\r\n                        localStorage.setItem('token', token)\r\n                        localStorage.setItem('user', JSON.stringify(user))\r\n\r\n                        Api.defaults.headers.common['Authorization'] = \"Bearer\" + token\r\n\r\n                        commit ('AUTH_SUCCESS', token, user)\r\n\r\n                        resolve(response)\r\n                    }).catch(error => {\r\n                        localStorage.removeItem('token')\r\n                        reject(error.response.data)\r\n                    })\r\n                })\r\n            },\r\n\r\n            getUser({commit}) {\r\n                const token = localStorage.getItem('token')\r\n                Api.defaults.headers.common['Authorization'] = \"Bearer\" + token\r\n                Api.get('/user')\r\n                .then(response => {\r\n                    commit('GET_USER', response.data.user)\r\n                })\r\n            }, \r\n\r\n            logout({commit}) {\r\n                return new Promise((resolve) => {\r\n                    commit(\"AUTH_LOGOUT\")\r\n                    localStorage.removeItem('token')\r\n                    localStorage.removeItem('user')\r\n\r\n                    delete Api.defaults.headers.common['Authorization']\r\n\r\n                    resolve()\r\n                })\r\n            }\r\n        }\r\n    },\r\n\r\n    getters:{\r\n        currentUser(state) {\r\n            return state.user\r\n        },\r\n\r\n        isLoggedIn(state) {\r\n            return state.token\r\n        }\r\n    }\r\n}\r\n\r\nexport default auth"]}]}